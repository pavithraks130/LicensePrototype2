@model List<License.MetCalWeb.Models.CartItem>

<div class="row">

    <h2>Cart</h2>
    @using (Html.BeginForm())
    {
        <div class="col-md-12">
            <div class="form-group">
                <div class="col-md-8">
                    <div class="form-group">

                        @if (Model != null && Model.Count > 0)
                        {
                            double totalamount = 0;
                            <table class="table" style="border: none">
                                <tr>
                                    <th>
                                        <label>Subscription Name</label>
                                    </th>
                                    <th>
                                        <label>Price</label>
                                    </th>
                                    <th>
                                        <label>Quantity</label>
                                    </th>
                                    <th>
                                        <label>Amount</label>
                                    </th>
                                    <th>Action</th>
                                </tr>

                                @for (var i = 0; i < Model.Count; i++)
                                {
                                    <tr>
                                        <td>
                                            @Model[i].SubType.Name
                                        </td>
                                        <td>
                                            @Model[i].SubType.Price
                                        </td>
                                        <td>
                                            @Html.DisplayFor(p => p[i].Quantity, new { @name = "cartQty" })
                                        </td>
                                        <td>
                                            <label>@Model[i].TotalPrice</label>
                                        </td>
                                        <td>
                                            <button style="background-color:white" id="delete-item" type="button" onclick="location.href='@Url.Action("RemoveItem", "Cart", new { Id =  @Model[i].Id}, null)'">
                                                <img src="~/Catalog/Images/Delete_Icon.png" />
                                            </button>
                                        </td>
                                    </tr>
                                    totalamount += Model[i].TotalPrice;
                                }
                                <tr></tr>
                                <tr>
                                    <td colspan="2"></td>
                                    <td><h2>Total</h2></td>
                                    <td>
                                        <h2>
                                            @totalamount
                                        </h2>
                                    </td>
                                    <td></td>
                                </tr>

                            </table>
                            <div class=" form-group float-right">
                                <button class="btn btn-default "> @Html.ActionLink("Offline Payment", "OfflinePayment", "Cart", new { @class = "btnOffline" })</button>
                                <button class="btn btn-default"> @Html.ActionLink("Online Payment", "PaymentGateway", "Cart", new { total = totalamount }, new { @class = "btnOnline" })</button>
                            </div>
                        }
                        else
                        {
                            <div>
                                <span style="font-size: 14px; font-weight:bold">No items added to Cart</span>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    }

</div>
